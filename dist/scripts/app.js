function ContentManager(){function a(a,b,c,d){a.src=b,a.onload=c,a.onerror=d}function b(){f++,f==e&&(f=0,d())}function c(a){console.log("Error Loading Image : "+a.target.src)}var d,e=1;this.SetDownloadCompleted=function(a){d=a},this.imgSkookum=new Image,this.imgBackgroundLayers=[];var f=0;this.StartDownload=function(){a(this.imgSkookum,"img/logo.png",b,c)}}function Actor(){this.initialize()}function Bullet(a,b){this.initialize(a,b)}function Enemy(){}function Game(a){this.config={fps:a.fps||30,startLevel:a.startLevel||1,rewardInterval:a.rewardInterval||5e3,rewardLevel:a.rewardLevel||1},this.canvas=document.getElementById("game"),this.canvas.width=800,this.canvas.height=600,this.ctx=this.canvas.getContext("2d"),this.stage=new createjs.Stage(this.canvas),this.over=!1,this.score=0,this.level=this.config.startLevel,this.rewardInterval=this.config.rewardInterval,this.rewardLevel=this.config.rewardLevel,this.numEnemyGroups=2,this.paused=!1,this.sounds={launch:new Audio("sounds/launch.wav"),shoot:new Audio("sounds/shoot2.wav"),hit:new Audio("sounds/hit.wav"),explosion:new Audio("sounds/explosion.wav")}}function tick(){game.over||game.paused||(game.enemies.children.length<1&&(game.score+=1e3,game.level++,game.buildNewEnemyGroup(game.numEnemyGroups++)),game.score>game.rewardInterval*game.rewardLevel&&(game.rewardLevel++,game.skookum.shield=!0,game.skookum.gotoAndStop(4)),game.stage.update())}function RedEnemy(a,b){this.initialize(a,b)}function Scoreboard(){this.initialize()}function Skookum(){this.initialize()}function randomString(){for(var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",b=30,c="",d=0;b>d;d++){var e=Math.floor(Math.random()*a.length);c+=a.substring(e,e+1)}return c}function findIndexById(a,b){for(var c=-1,d=0,e=a.length;e>d;d++)if(a[d].id==b)return d;return c}function stringify(a){for(var b="[",c=0;c<a.length;c++)b+=" "+a[c].id+", ";return b+="]"}!function(a){function b(a,b,c,d){this.initialize(a,b,c,d)}b.prototype=new createjs.Rectangle,b.prototype.Rectangle_initialize=b.prototype.initialize,b.prototype.initialize=function(a,b,c,d){this.Rectangle_initialize(a,b,c,d),this.Location=new Point(this.x,this.y),this.Center=new Point(parseInt(this.x+this.width/2),parseInt(this.y+this.height/2))},b.prototype.Left=function(){return parseInt(this.x)},b.prototype.Right=function(){return parseInt(this.x+this.width)},b.prototype.Top=function(){return parseInt(this.y)},b.prototype.Bottom=function(){return parseInt(this.y+this.height)},b.prototype.Contains=function(a){return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y?a.y+a.height<=this.y+this.height:!1},b.prototype.ContainsPoint=function(a){return this.x<=a.x&&a.x<this.x+this.width&&this.y<=a.y?a.y<this.y+this.height:!1},b.prototype.Intersects=function(a){return a.x<this.x+this.width&&this.x<a.x+a.width&&a.y<this.y+this.height?this.y<a.y+a.height:!1},b.prototype.GetBottomCenter=function(){return new Point(parseInt(this.x+this.width/2),this.Bottom())},b.prototype.GetIntersectionDepth=function(a){var b=this,c=b.width/2,d=b.height/2,e=a.width/2,f=a.height/2,g=new Point(b.Left()+c,b.Top()+d),h=new Point(a.Left()+e,a.Top()+f),i=g.x-h.x,j=g.y-h.y,k=c+e,l=d+f;if(Math.abs(i)>=k||Math.abs(j)>=l)return new Point(0,0);var m=i>0?k-i:-k-i,n=j>0?l-j:-l-j;return new Point(m,n)},a.XNARectangle=b}(window),Actor.prototype=new createjs.Sprite,Actor.prototype.BitmapAnimation_initialize=Actor.prototype.initialize,Actor.prototype.checkHit=function(a){return a.dead?!1:this.intersects(a)},Actor.prototype.left=function(){return parseInt(this.x-this.width/2,10)},Actor.prototype.right=function(){return parseInt(this.x+this.width/2,10)},Actor.prototype.top=function(){return parseInt(this.y-this.height/2,10)},Actor.prototype.bottom=function(){return parseInt(this.y+this.height/2,10)},Actor.prototype.intersects=function(a){return a.left()<this.right()&&this.left()<a.right()&&a.top()<this.bottom()?this.top()<a.bottom():!1},Bullet.prototype=new Actor,Bullet.prototype.initialize=function(a,b){this.id=randomString(),this.name="bullet",this.frameWidth=50,this.frameHeight=100,this.dead=!1;var c=new createjs.SpriteSheet({images:["images/"+this.name+".png"],frames:{width:this.frameWidth,height:this.frameHeight,count:2,regX:this.frameWidth/2,regY:this.frameHeight/2},animations:{shoot:[0,1,"shoot",8]}});return this.BitmapAnimation_initialize(c),this.gotoAndPlay("shoot"),this.x=a,this.y=b,this.scale=.2,this.width=parseInt(.35*this.frameWidth*this.scale,10),this.height=parseInt(.8*this.frameHeight*this.scale,10),this.vY=4,this.scaleX=this.scaleY=this.scale,this.currentFrame=0,game.items.addChild(this),this},Bullet.prototype.onTick=function(){var a=this;return this.dead?game.items.removeChild(this):(this.y-=this.vY,this.vY*=1.03,this.bottom()<-this.height?this.die():_.each(game.enemies.children,function(b){a.checkHit(b)&&(b.takeDamage(),a.die())}),this)},Bullet.prototype.die=function(){this.dead=!0},Enemy.prototype=new Actor,Enemy.prototype.onTick=function(){return this.dead?(this.currentFrame==this.deadFrame&&game.enemies.removeChild(this),void 0):(this.top()>game.canvas.height&&this.die(),this.move(),this)},Enemy.prototype.takeDamage=function(){this.health--,game.playSound("hit"),this.health<1?(this.die(),game.score+=this.points.kill):(this.gotoAndPlay(this.health_animations[this.health]),game.score+=this.points.hit)},Enemy.prototype.die=function(){game.playSound("explosion"),this.gotoAndPlay("dead"),this.dead=!0},document.createElement("canvas").getContext||function(){function a(){return this.context_||(this.context_=new j(this))}function b(a,b){var c=x.call(arguments,2);return function(){return a.apply(b,c.concat(x.call(arguments)))}}function c(a){var b=a.srcElement;switch(a.propertyName){case"width":b.style.width=b.attributes.width.nodeValue+"px",b.getContext().clearRect();break;case"height":b.style.height=b.attributes.height.nodeValue+"px",b.getContext().clearRect()}}function d(a){var b=a.srcElement;b.firstChild&&(b.firstChild.style.width=b.clientWidth+"px",b.firstChild.style.height=b.clientHeight+"px")}function e(){return[[1,0,0],[0,1,0],[0,0,1]]}function f(a,b){for(var c=e(),d=0;3>d;d++)for(var f=0;3>f;f++){for(var g=0,h=0;3>h;h++)g+=a[d][h]*b[h][f];c[d][f]=g}return c}function g(a,b){b.fillStyle=a.fillStyle,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.lineWidth=a.lineWidth,b.miterLimit=a.miterLimit,b.shadowBlur=a.shadowBlur,b.shadowColor=a.shadowColor,b.shadowOffsetX=a.shadowOffsetX,b.shadowOffsetY=a.shadowOffsetY,b.strokeStyle=a.strokeStyle,b.globalAlpha=a.globalAlpha,b.arcScaleX_=a.arcScaleX_,b.arcScaleY_=a.arcScaleY_,b.lineScale_=a.lineScale_}function h(a){var b,c=1;if(a=String(a),"rgb"==a.substring(0,3)){var d=a.indexOf("(",3),e=a.indexOf(")",d+1),f=a.substring(d+1,e).split(",");b="#";for(var g=0;3>g;g++)b+=z[Number(f[g])];4==f.length&&"a"==a.substr(3,1)&&(c=f[3])}else b=a;return{color:b,alpha:c}}function i(a){switch(a){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function j(a){this.m_=e(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*v,this.globalAlpha=1,this.canvas=a;var b=a.ownerDocument.createElement("div");b.style.width=a.clientWidth+"px",b.style.height=a.clientHeight+"px",b.style.overflow="hidden",b.style.position="absolute",a.appendChild(b),this.element_=b,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function k(a,b,c,d){a.currentPath_.push({type:"bezierCurveTo",cp1x:b.x,cp1y:b.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y}),a.currentX_=d.x,a.currentY_=d.y}function l(a){for(var b=0;3>b;b++)for(var c=0;2>c;c++)if(!isFinite(a[b][c])||isNaN(a[b][c]))return!1;return!0}function m(a,b,c){l(b)&&(a.m_=b,c&&(a.lineScale_=u(t(b[0][0]*b[1][1]-b[0][1]*b[1][0]))))}function n(a){this.type_=a,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function o(){}var p=Math,q=p.round,r=p.sin,s=p.cos,t=p.abs,u=p.sqrt,v=10,w=v/2,x=Array.prototype.slice,y={init:function(a){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var c=a||document;c.createElement("canvas"),c.attachEvent("onreadystatechange",b(this.init_,this,c))}},init_:function(a){if(a.namespaces.g_vml_||a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),a.namespaces.g_o_||a.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),!a.styleSheets.ex_canvas_){var b=a.createStyleSheet();b.owningElement.id="ex_canvas_",b.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}for(var c=a.getElementsByTagName("canvas"),d=0;d<c.length;d++)this.initElement(c[d])},initElement:function(b){if(!b.getContext){b.getContext=a,b.innerHTML="",b.attachEvent("onpropertychange",c),b.attachEvent("onresize",d);var e=b.attributes;e.width&&e.width.specified?b.style.width=e.width.nodeValue+"px":b.width=b.clientWidth,e.height&&e.height.specified?b.style.height=e.height.nodeValue+"px":b.height=b.clientHeight}return b}};y.init();for(var z=[],A=0;16>A;A++)for(var B=0;16>B;B++)z[16*A+B]=A.toString(16)+B.toString(16);var C=j.prototype;C.clearRect=function(){this.element_.innerHTML=""},C.beginPath=function(){this.currentPath_=[]},C.moveTo=function(a,b){var c=this.getCoords_(a,b);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},C.lineTo=function(a,b){var c=this.getCoords_(a,b);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},C.bezierCurveTo=function(a,b,c,d,e,f){var g=this.getCoords_(e,f),h=this.getCoords_(a,b),i=this.getCoords_(c,d);k(this,h,i,g)},C.quadraticCurveTo=function(a,b,c,d){var e=this.getCoords_(a,b),f=this.getCoords_(c,d),g={x:this.currentX_+.6666666666666666*(e.x-this.currentX_),y:this.currentY_+.6666666666666666*(e.y-this.currentY_)};k(this,g,{x:g.x+(f.x-this.currentX_)/3,y:g.y+(f.y-this.currentY_)/3},f)},C.arc=function(a,b,c,d,e,f){c*=v;var g=f?"at":"wa",h=a+s(d)*c-w,i=b+r(d)*c-w,j=a+s(e)*c-w,k=b+r(e)*c-w;h!=j||f||(h+=.125);var l=this.getCoords_(a,b),m=this.getCoords_(h,i),n=this.getCoords_(j,k);this.currentPath_.push({type:g,x:l.x,y:l.y,radius:c,xStart:m.x,yStart:m.y,xEnd:n.x,yEnd:n.y})},C.rect=function(a,b,c,d){this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath()},C.strokeRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.stroke(),this.currentPath_=e},C.fillRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.fill(),this.currentPath_=e},C.createLinearGradient=function(a,b,c,d){var e=new n("gradient");return e.x0_=a,e.y0_=b,e.x1_=c,e.y1_=d,e},C.createRadialGradient=function(a,b,c,d,e,f){var g=new n("gradientradial");return g.x0_=a,g.y0_=b,g.r0_=c,g.x1_=d,g.y1_=e,g.r1_=f,g},C.drawImage=function(a){var b,c,d,e,f,g,h,i,j=a.runtimeStyle.width,k=a.runtimeStyle.height;a.runtimeStyle.width="auto",a.runtimeStyle.height="auto";var l=a.width,m=a.height;if(a.runtimeStyle.width=j,a.runtimeStyle.height=k,3==arguments.length)b=arguments[1],c=arguments[2],f=g=0,h=d=l,i=e=m;else if(5==arguments.length)b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],f=g=0,h=l,i=m;else{if(9!=arguments.length)throw Error("Invalid number of arguments");f=arguments[1],g=arguments[2],h=arguments[3],i=arguments[4],b=arguments[5],c=arguments[6],d=arguments[7],e=arguments[8]}var n=this.getCoords_(b,c),o=[];if(o.push(" <g_vml_:group",' coordsize="',10*v,",",10*v,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]){var r=[];r.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",q(n.x/v),",","Dy=",q(n.y/v),"");var s=n,t=this.getCoords_(b+d,c),u=this.getCoords_(b,c+e),w=this.getCoords_(b+d,c+e);s.x=p.max(s.x,t.x,u.x,w.x),s.y=p.max(s.y,t.y,u.y,w.y),o.push("padding:0 ",q(s.x/v),"px ",q(s.y/v),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",r.join(""),", sizingmethod='clip');")}else o.push("top:",q(n.y/v),"px;left:",q(n.x/v),"px;");o.push(' ">','<g_vml_:image src="',a.src,'"',' style="width:',v*d,"px;"," height:",v*e,'px;"',' cropleft="',f/l,'"',' croptop="',g/m,'"',' cropright="',(l-f-h)/l,'"',' cropbottom="',(m-g-i)/m,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",o.join(""))},C.stroke=function(a){var b=[],c=h(a?this.fillStyle:this.strokeStyle),d=c.color,e=c.alpha*this.globalAlpha;b.push("<g_vml_:shape",' filled="',!!a,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0 0" coordsize="',10*v," ",10*v,'"',' stroked="',!a,'"',' path="');for(var f={x:null,y:null},g={x:null,y:null},j=0;j<this.currentPath_.length;j++){var k=this.currentPath_[j];switch(k.type){case"moveTo":b.push(" m ",q(k.x),",",q(k.y));break;case"lineTo":b.push(" l ",q(k.x),",",q(k.y));break;case"close":b.push(" x "),k=null;break;case"bezierCurveTo":b.push(" c ",q(k.cp1x),",",q(k.cp1y),",",q(k.cp2x),",",q(k.cp2y),",",q(k.x),",",q(k.y));break;case"at":case"wa":b.push(" ",k.type," ",q(k.x-this.arcScaleX_*k.radius),",",q(k.y-this.arcScaleY_*k.radius)," ",q(k.x+this.arcScaleX_*k.radius),",",q(k.y+this.arcScaleY_*k.radius)," ",q(k.xStart),",",q(k.yStart)," ",q(k.xEnd),",",q(k.yEnd))}k&&((null==f.x||k.x<f.x)&&(f.x=k.x),(null==g.x||k.x>g.x)&&(g.x=k.x),(null==f.y||k.y<f.y)&&(f.y=k.y),(null==g.y||k.y>g.y)&&(g.y=k.y))}if(b.push(' ">'),a)if("object"==typeof this.fillStyle){var l=this.fillStyle,m=0,n={x:0,y:0},o=0,r=1;if("gradient"==l.type_){var s=l.x1_/this.arcScaleX_,t=l.y1_/this.arcScaleY_,u=this.getCoords_(l.x0_/this.arcScaleX_,l.y0_/this.arcScaleY_),w=this.getCoords_(s,t);m=180*Math.atan2(w.x-u.x,w.y-u.y)/Math.PI,0>m&&(m+=360),1e-6>m&&(m=0)}else{var u=this.getCoords_(l.x0_,l.y0_),x=g.x-f.x,y=g.y-f.y;n={x:(u.x-f.x)/x,y:(u.y-f.y)/y},x/=this.arcScaleX_*v,y/=this.arcScaleY_*v;var z=p.max(x,y);o=2*l.r0_/z,r=2*l.r1_/z-o}var A=l.colors_;A.sort(function(a,b){return a.offset-b.offset});for(var B=A.length,C=A[0].color,D=A[B-1].color,E=A[0].alpha*this.globalAlpha,F=A[B-1].alpha*this.globalAlpha,G=[],j=0;B>j;j++){var H=A[j];G.push(H.offset*r+o+" "+H.color)}b.push('<g_vml_:fill type="',l.type_,'"',' method="none" focus="100%"',' color="',C,'"',' color2="',D,'"',' colors="',G.join(","),'"',' opacity="',F,'"',' g_o_:opacity2="',E,'"',' angle="',m,'"',' focusposition="',n.x,",",n.y,'" />')}else b.push('<g_vml_:fill color="',d,'" opacity="',e,'" />');else{var I=this.lineScale_*this.lineWidth;1>I&&(e*=I),b.push("<g_vml_:stroke",' opacity="',e,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',i(this.lineCap),'"',' weight="',I,'px"',' color="',d,'" />')}b.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",b.join(""))},C.fill=function(){this.stroke(!0)},C.closePath=function(){this.currentPath_.push({type:"close"})},C.getCoords_=function(a,b){var c=this.m_;return{x:v*(a*c[0][0]+b*c[1][0]+c[2][0])-w,y:v*(a*c[0][1]+b*c[1][1]+c[2][1])-w}},C.save=function(){var a={};g(this,a),this.aStack_.push(a),this.mStack_.push(this.m_),this.m_=f(e(),this.m_)},C.restore=function(){g(this.aStack_.pop(),this),this.m_=this.mStack_.pop()},C.translate=function(a,b){m(this,f([[1,0,0],[0,1,0],[a,b,1]],this.m_),!1)},C.rotate=function(a){var b=s(a),c=r(a);m(this,f([[b,c,0],[-c,b,0],[0,0,1]],this.m_),!1)},C.scale=function(a,b){this.arcScaleX_*=a,this.arcScaleY_*=b,m(this,f([[a,0,0],[0,b,0],[0,0,1]],this.m_),!0)},C.transform=function(a,b,c,d,e,g){m(this,f([[a,b,0],[c,d,0],[e,g,1]],this.m_),!0)},C.setTransform=function(a,b,c,d,e,f){m(this,[[a,b,0],[c,d,0],[e,f,1]],!0)},C.clip=function(){},C.arcTo=function(){},C.createPattern=function(){return new o},n.prototype.addColorStop=function(a,b){b=h(b),this.colors_.push({offset:a,color:b.color,alpha:b.alpha})},G_vmlCanvasManager=y,CanvasRenderingContext2D=j,CanvasGradient=n,CanvasPattern=o}();var KEYCODE_SPACE=32,KEYCODE_UP=38,KEYCODE_DOWN=40,KEYCODE_LEFT=37,KEYCODE_RIGHT=39,KEYCODE_W=87,KEYCODE_A=65,KEYCODE_D=68,KEYCODE_P=80;Game.prototype={initialize:function(){this.drawStars(),this.skookum=new Skookum,this.items=new createjs.Container,this.items.name="gameItems",this.stage.addChild(this.items),this.enemies=new createjs.Container,this.enemies.name="gameEnemies",this.stage.addChild(this.enemies),this.scoreboard=new Scoreboard,this.buildNewEnemyGroup(this.numEnemyGroups++),this.sounds.launch.play(),document.onkeydown=function(a){game.handleKeyDown(a)},document.onkeyup=function(a){game.handleKeyUp(a)},createjs.Ticker.setFPS(this.config.fps),createjs.Ticker.addEventListener("tick",tick)},handleKeyDown:function(a){switch(a||(a=window.event),a.keyCode){case KEYCODE_LEFT:a.preventDefault(),this.skookum.x_direction=-1;break;case KEYCODE_RIGHT:a.preventDefault(),this.skookum.x_direction=1;break;case KEYCODE_UP:a.preventDefault(),this.skookum.y_direction=-1;break;case KEYCODE_DOWN:a.preventDefault(),this.skookum.y_direction=1;break;case KEYCODE_SPACE:a.preventDefault(),this.skookum.shoot();break;case KEYCODE_P:a.preventDefault(),this.paused=!this.paused}},handleKeyUp:function(a){switch(a||(a=window.event),a.keyCode){case KEYCODE_LEFT:case KEYCODE_RIGHT:this.skookum.x_direction=0;break;case KEYCODE_UP:case KEYCODE_DOWN:this.skookum.y_direction=0;break;case KEYCODE_SPACE:}},spawnEnemy:function(a,b){new RedEnemy(a||350,b||150)},buildNewEnemyGroup:function(a){for(var b=this,c=a||2,d=10,e=60,f=71,g=1;c>=g;g++)for(var h=1;d>=h;h++)b.spawnEnemy(f*h,e*g+50)},drawGrid:function(){this.ctx.strokeStyle="rgba(255, 255, 255, 0.3)";for(var a=10,b=this.canvas.height;b>a;a+=10)this.ctx.beginPath(),this.ctx.moveTo(0,a),this.ctx.lineTo(this.canvas.width,a),this.ctx.stroke();for(a=10,b=this.canvas.height;b>a;a+=10)this.ctx.beginPath(),this.ctx.moveTo(a,0),this.ctx.lineTo(a,this.canvas.height),this.ctx.stroke()},drawStars:function(){this.starField=new createjs.Container,this.starField.name="starfield";for(var a=0;300>a;a++){var b=Math.random()*this.canvas.width,c=Math.random()*this.canvas.height,d=2*Math.random(),e=new createjs.Shape;e.graphics.beginFill(createjs.Graphics.getRGB(255,255,255)),e.graphics.drawCircle(0,0,d),e.x=b,e.y=c,this.starField.addChild(e)}this.stage.addChild(this.starField)},playSound:function(a){this.sounds[a].pause(),this.sounds[a].currentTime=0,this.sounds[a].play()}},window.lib||(window.lib={});var p;(lib.logo=function(){this.initialize(),this.instance=new lib.logo_1,this.instance.setTransform(275.5,200,1,1,0,0,0,140.1,119.3),this.addChild(this.instance)}).prototype=p=new Container,p.nominalBounds=new Rectangle(135.4,80.7,280.2,238.6),(lib.logo_1=function(){this.initialize(),this.shape=new Shape,this.shape.graphics.f("#9dc8ba").p("ApDpmIBCG7QAOBZA9BoQA+BqBHA3IInGwQAJAHAMgCQALgCAHgKIElnOQAHgKgEgKQgDgKgMgDIskkCQhNgYhJhGQhHhGgchMIhTjoQgCgFgEABQgFACACAF").f(),this.shape.setTransform(219.3,163.6),this.shape_1=new Shape,this.shape_1.graphics.f("#a7cdc1").p("AnIsRIuoYWQgLASAGAIQAHAJAUgHIMDj3QAvgPAwgvQAwgvARgvIE9trQADgKAKgHQALgHALAAICqAAQAMAAAKAHQAKAHADAKIE9NrQARAvAwAvQAwAvAwAPIMJD4QAUAGAGgIQAGgJgKgRIup4XQgGgIgKgGQgLgGgKAAItJAAQgJAAgLAGQgLAGgFAI").f(),this.shape_1.setTransform(140.1,80.5),this.shape_2=new Shape,this.shape_2.graphics.f("#9dc8ba").p("AI9ppIhTDoQgcBMhIBGQhIBGhNAYIskECQgLADgEAKQgEAKAHAKIElHOQAHAKALACQALACAKgHIInmwQBHg3A9hqQA+hoANhZIBDm7QABgFgEgCQgEgBgCAF").f(),this.shape_2.setTransform(60.2,163.6),this.shape_3=new Shape,this.shape_3.graphics.f("#88bdac").p("ABxDbIofGqQgRANADAKQACAJAXAAINIAAQALAAAIgIQAHgHAAgLIAB0rQAAgFgEAAQgEAAAAAEIhFHDQgRByhLB/QhLCAhbBI").f(),this.shape_3.setTransform(88.2,170.9),this.shape_4=new Shape,this.shape_4.graphics.f("#88bdac").p("Am6qlQgDAAAAAFIABUrQAAALAHAHQAIAIAKAAINJAAQAVAAADgJQAEgKgRgNIofmqQhchHhLiBQhLh/gRhyIhEnDQgBgEgEAA").f(),this.shape_4.setTransform(191.3,170.9),this.addChild(this.shape_4,this.shape_3,this.shape_2,this.shape_1,this.shape)}).prototype=p=new Container,p.nominalBounds=new Rectangle(0,0,280.2,238.6),function(){window.game=new Game({fps:60,startLevel:1,rewardInterval:5e3,rewardLevel:1}),game.initialize()}(),RedEnemy.prototype=new Enemy,RedEnemy.prototype.initialize=function(a,b){this.id=randomString(),this.name="red_enemy",this.enemy=!0,this.frameWidth=230,this.frameHeight=230,this.dead=!1,this.points={hit:10,kill:25},this.health=3,this.health_animations={3:"idle",2:"damaged",1:"dying"},this.deadFrame=9;var c=new createjs.SpriteSheet({images:["images/"+this.name+".png"],frames:{width:this.frameWidth,height:this.frameHeight,count:10,regX:this.frameWidth/2,regY:this.frameHeight/2},animations:{idle:[0,1,"idle",8],damaged:[2,3,"damaged",12],dying:[4,5,"dying",25],dead:[6,9,"dead",8]}});return this.BitmapAnimation_initialize(c),this.gotoAndPlay("idle"),this.x=a,this.y=b,this.scale=.2,this.width=parseInt(.75*this.frameWidth*this.scale,10),this.height=parseInt(.75*this.frameHeight*this.scale,10),this.vY=50,this.vX=2,this.scaleX=this.scaleY=this.scale,this.direction=1,this.movement_padding=20,this.onAnimationEnd=function(a,b){"dead"==b&&this.gotoAndStop(9)},this.currentFrame=0,game.enemies.addChild(this),this},RedEnemy.prototype.move=function(){return this.top()>game.canvas.height&&game.skookum.takeDamage(),!game.skookum.invincable&&this.intersects(game.skookum)&&(game.skookum.takeDamage(),this.takeDamage()),this.x+=this.vX*this.direction*this.health,(this.x>game.canvas.width-this.movement_padding||this.x<this.movement_padding)&&(this.direction*=-1,this.y+=this.vY),this},RedEnemy.prototype.shoot=function(){},Scoreboard.prototype=new Text,Scoreboard.prototype.initialize=function(){this.color="#fff",this.font="bold 24px Arial",this.text="SCORE:  0",this.x=10,this.y=25,this.name="scoreboard",game.stage.addChild(this)},Scoreboard.prototype.onTick=function(){this.text="SCORE:  "+game.score},Skookum.prototype=new Actor,Skookum.prototype.initialize=function(){this.id=randomString(),this.name="skookum",this.startupSequence=!0,this.shield=!0,this.frameWidth=270,this.frameHeight=220;var a=new createjs.SpriteSheet({images:["images/"+this.name+".png"],frames:{width:this.frameWidth,height:this.frameHeight,count:8,regX:this.frameWidth/2,regY:this.frameHeight/2},animations:{shoot_without_shield:[0,3,"shoot_without_shield",5],shoot_with_shield:[4,7,"shoot_with_shield",5]}});this.BitmapAnimation_initialize(a),this.scale=.25,this.width=parseInt(.8*this.frameWidth*this.scale,10),this.height=parseInt(.8*this.frameHeight*this.scale,10),this.vX=10,this.vY=7,this.x_direction=0,this.y_direction=0,this.hitTimeout=0,this.invincable=!1,this.timeoutLength=120,this.onAnimationEnd=function(){this.stop()},this.x=Math.floor(game.canvas.width/2),this.y=game.canvas.height-this.frameHeight*this.scale-50,this.scaleX=this.scaleY=2,this.currentFrame=4,game.stage.addChild(this)},Skookum.prototype.onTick=function(){if(this.dead)return game.over=!0,game.stage.removeChild(this);if(this.startupSequence){var a=this.scaleX-.025;return this.scaleX=this.scaleY=a,a<=this.scale&&(this.startupSequence=!1),this}return 0!==this.x_direction&&this.testBoundsX()&&(this.x+=this.vX*this.x_direction),0!==this.y_direction&&this.testBoundsY()&&(this.y+=this.vY*this.y_direction),this.hitTimeout>0&&(this.hitTimeout++,this.alpha=Math.random()),this.hitTimeout>=this.timeoutLength&&(this.hitTimeout=0,this.invincable=!1,this.alpha=1),this},Skookum.prototype.shoot=function(){this.shield?this.gotoAndPlay("shoot_with_shield"):this.gotoAndPlay("shoot_without_shield"),new Bullet(this.x,this.y),game.playSound("shoot")},Skookum.prototype.takeDamage=function(){this.invincable||(this.hitTimeout=1,this.invincable=!0,this.shield?(this.shield=!1,this.gotoAndStop(0)):this.die())},Skookum.prototype.die=function(){game.playSound("explosion"),this.dead=!0},Skookum.prototype.testBoundsX=function(){return this.right()+20>game.canvas.width&&1===this.x_direction?!1:this.left()-20<1&&-1===this.x_direction?!1:!0},Skookum.prototype.testBoundsY=function(){return this.bottom()+20>game.canvas.height&&1===this.y_direction?!1:this.y<game.canvas.height/2&&-1===this.y_direction?!1:!0};